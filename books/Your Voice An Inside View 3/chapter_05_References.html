<!DOCTYPE html>
<html lang="ru" class="theme-vintage">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>References - Your Voice: An Inside View 3</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="theme-vintage">
    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º -->
    <div class="theme-switcher">
        <div class="theme-switcher-label">üé® –¢–µ–º–∞</div>
        <div class="theme-buttons">
            <div class="theme-btn theme-btn-vintage active" onclick="setTheme('vintage')" title="–í–∏–Ω—Ç–∞–∂–Ω–∞—è —Ç–µ–º–∞"></div>
            <div class="theme-btn theme-btn-dark" onclick="setTheme('dark')" title="–ß–µ—Ä–Ω–∞—è —Ç–µ–º–∞"></div>
        </div>
    </div>
    
    <div class="book-header">
        <h1 class="book-title">Your Voice: An Inside View 3</h1>
        <p class="book-author">Scott McCoy</p>
    </div>
    
    <div class="navigation">
        <a href="index.html" class="nav-button">üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</a>
        <a href="chapter_04_Sound, Part 2.html" class="nav-button">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
        <a href="chapter_06_Resonance.html" class="nav-button">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</a>
    </div>
    
    <div class="download-section">
        <h3>üì• –°–∫–∞—á–∞—Ç—å –≥–ª–∞–≤—É:</h3>
        <div class="download-buttons">
            <button onclick="downloadChapter('epub')" class="download-btn epub-btn">üìñ EPUB</button>
            <button onclick="downloadChapter('docx')" class="download-btn docx-btn">üìÑ DOCX</button>
        </div>
    </div>
    
    <div class="chapter-content" data-chapter-title="References">
        <!--?xml version='1.0' encoding='UTF-8'?--><!DOCTYPE html><html xml:lang="en-us" lang="en-us"  xmlns:epub="http://www.idpf.org/2007/ops"><head>
    <link rel="stylesheet" type="text/css" href="../../css/base.css" />
<link rel="stylesheet" type="text/css" href="../../css/kotobeeInteractive.css" />
<link rel="stylesheet" type="text/css" href="../../css/global.css" />

    <script type="text/javascript" src="../../js/kotobeeInteractive.js"></script>
<script type="text/javascript" src="../../js/global.js"></script>

    <title>References</title>
    
<meta charset="utf-8" />
 <meta name="kotobee-chapter" content="raw/s3oixt.xhtml" />
<meta name="kotobee-book" content="urn:uuid:e7086cd1-8990-58c6-a2b2-d07314a7f098" />
</head>
<body>


</body></html>
    </div>
    
    <div class="navigation">
        <a href="index.html" class="nav-button">üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</a>
        <a href="chapter_04_Sound, Part 2.html" class="nav-button">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
        <a href="chapter_06_Resonance.html" class="nav-button">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</a>
    </div>
    
    <script src="/static/js/notes.js"></script>
    <script>
        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º
        function setTheme(theme) {
            // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∫–ª–∞—Å—Å—ã —Ç–µ–º —Å body –∏ html
            document.body.className = document.body.className.replace(/theme-\w+/g, '');
            document.documentElement.className = document.documentElement.className.replace(/theme-\w+/g, '');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å —Ç–µ–º—ã –∫ body –∏ html
            document.body.classList.add('theme-' + theme);
            document.documentElement.classList.add('theme-' + theme);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±–æ—Ä –≤ localStorage
            localStorage.setItem('reading-theme', theme);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector('.theme-btn-' + theme).classList.add('active');
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function loadSavedTheme() {
            const savedTheme = localStorage.getItem('reading-theme') || 'vintage';
            setTheme(savedTheme);
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≥–ª–∞–≤—ã
        function downloadChapter(format) {
            const pathParts = window.location.pathname.split('/');
            if (pathParts[1] === 'book' && pathParts[2]) {
                const bookPath = pathParts[2];
                
                // –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞–µ–º book_id
                fetch(`/api/book-info?path=${encodeURIComponent(bookPath)}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.book_id) {
                            const chapterIndex = 4;  // –ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π –≥–ª–∞–≤—ã
                            const downloadUrl = `/download-chapter/${data.book_id}/${chapterIndex}/${format}`;
                            
                            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
                            const link = document.createElement('a');
                            link.href = downloadUrl;
                            link.style.display = 'none';
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                        } else {
                            alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ');
                        }
                    })
                    .catch(error => {
                        console.error('–û—à–∏–±–∫–∞:', error);
                        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞');
                    });
            }
        }
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∑–∞–º–µ—Ç–æ–∫
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É
            loadSavedTheme();
            
            // –ü–æ–ª—É—á–∞–µ–º book_id –∏–∑ –ø—É—Ç–∏ URL
            const pathParts = window.location.pathname.split('/');
            if (pathParts[1] === 'book' && pathParts[2]) {
                const bookPath = pathParts[2];
                fetch(`/api/book-info?path=${encodeURIComponent(bookPath)}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.book_id && window.notesSystem) {
                            window.notesSystem.bookId = data.book_id;
                            window.notesSystem.addNotesButtonToNavigation();
                        }
                    })
                    .catch(error => console.log('Could not load book info:', error));
            }
        });
    </script>
</body>
</html>